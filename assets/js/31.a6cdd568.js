(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{362:function(r,t,a){"use strict";a.r(t);var _=a(4),s=Object(_.a)({},(function(){var r=this,t=r._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h2",{attrs:{id:"一、简单介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、简单介绍"}},[r._v("#")]),r._v(" 一、简单介绍")]),r._v(" "),t("ul",[t("li",[r._v("brpc 是一种 C++ 语言开发的工业级 rpc 框架，工作于应用层，类似于http、ftmp、grpc等；")]),r._v(" "),t("li",[r._v("brpc 采用的 proto 作为序列化协议，类似于http常采用json采用序列化协议；")])]),r._v(" "),t("h2",{attrs:{id:"二、brpc支持的协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、brpc支持的协议"}},[r._v("#")]),r._v(" 二、brpc支持的协议")]),r._v(" "),t("ul",[t("li",[r._v("restful、http/https、h2/gRPC、redis、memcached；")]),r._v(" "),t("li",[r._v("rtmp/flv/hls、hadoop_rpc、rdma、thrift；")]),r._v(" "),t("li",[r._v("百度内协议: baidu_std, streaming_rpc, hulu_pbrpc, sofa_pbrpc, nova_pbrpc, public_pbrpc, ubrpc和使用nshead的各种协议；")])]),r._v(" "),t("h2",{attrs:{id:"三、与grpc的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、与grpc的区别"}},[r._v("#")]),r._v(" 三、与grpc的区别")]),r._v(" "),t("h3",{attrs:{id:"_1-相同点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-相同点"}},[r._v("#")]),r._v(" 1，相同点")]),r._v(" "),t("ul",[t("li",[r._v("都工作在应用层；")]),r._v(" "),t("li",[r._v("都是基于 protobuf 协议完成序列化的；")])]),r._v(" "),t("h3",{attrs:{id:"_2-不同点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-不同点"}},[r._v("#")]),r._v(" 2，不同点")]),r._v(" "),t("ul",[t("li",[r._v("brpc 是单语言多协议，只支持 C++语言，但是支持 rpc、http、redis 等多种协议；")]),r._v(" "),t("li",[r._v("grpc 是但协议多语言，支持 go、python、java、c++等多种语言，但是支持 rpc 协议；")])]),r._v(" "),t("h2",{attrs:{id:"三、brpc支持的功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、brpc支持的功能"}},[r._v("#")]),r._v(" 三、brpc支持的功能")]),r._v(" "),t("ul",[t("li",[r._v("Server能同步或异步处理请求；")]),r._v(" "),t("li",[r._v("Client支持同步、异步、半同步，或使用组合channels简化复杂的分库或并发访问；")]),r._v(" "),t("li",[r._v("可以通过浏览器或curl查看server内部状态, 分析在线服务的cpu热点, 内存分配和锁竞争, 通过bvar统计各种指标并通过/vars查看。")]),r._v(" "),t("li",[r._v("有更好的延时和吞吐；\n"),t("ul",[t("li",[r._v("在brpc中，对不同fd的读取是完全并发的，对同一个fd中不同消息的解析也是并发的。解析一个特别大的protobuf message不会影响同一个客户端的其他消息，更不用提其他客户端的消息；")]),r._v(" "),t("li",[r._v("对同一fd和不同fd的写出是高度并发的。当多个线程都要对一个fd写出时（常见于单连接），第一个线程会直接在原线程写出，其他线程会以wait-free的方式托付自己的写请求，多个线程在高度竞争下仍可以在1秒内对同一个fd写入500万个16字节的消息。更多细节看这里。")]),r._v(" "),t("li",[r._v("尽量少的锁。高QPS服务可以充分利用一台机器的CPU。比如为处理请求创建bthread, 设置超时, 根据回复找到RPC上下文, 记录性能计数器都是高度并发的。即使服务的QPS超过50万，用户也很少在 contention profiler 中看到框架造成的锁竞争。")]),r._v(" "),t("li",[r._v("服务器线程数自动调节。传统的服务器需要根据下游延时的调整自身的线程数，否则吞吐可能会受影响。在brpc中，每个请求均运行在新建立的bthread中，请求结束后线程就结束了，所以天然会根据负载自动调节线程数。")])])]),r._v(" "),t("li",[r._v("定制各类组件, 包括命名服务 (dns, zk, etcd), 负载均衡 (rr, random, consistent hashing)等；")])])])}),[],!1,null,null,null);t.default=s.exports}}]);